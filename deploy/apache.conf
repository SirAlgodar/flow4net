<VirtualHost *:80>
    ServerName seu-dominio.com
    ServerAlias www.seu-dominio.com
    
    # Logs
    ErrorLog ${APACHE_LOG_DIR}/flow4network_error.log
    CustomLog ${APACHE_LOG_DIR}/flow4network_access.log combined

    # Proxy Configuration
    ProxyRequests Off
    ProxyPreserveHost On
    ProxyVia Full
    
    <Proxy *>
        Require all granted
    </Proxy>

    # WebSocket Support (Optional, but recommended for Next.js)
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://localhost:3100/$1 [P,L]
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://localhost:3100/$1 [P,L]

    # Proxy Pass
    ProxyPass / http://localhost:3100/
    ProxyPassReverse / http://localhost:3100/
</VirtualHost>
