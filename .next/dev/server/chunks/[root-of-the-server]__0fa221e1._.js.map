{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/gabrieldesouza/Documents/trae_projects/flow4network/src/app/api/diagnostics/external-check/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\n\nexport async function GET(request: Request) {\n  const { searchParams } = new URL(request.url);\n  const targetUrl = searchParams.get('url');\n\n  if (!targetUrl) {\n    return NextResponse.json({ error: 'URL required' }, { status: 400 });\n  }\n\n  const start = performance.now();\n  try {\n    const response = await fetch(targetUrl, {\n      method: 'HEAD',\n      cache: 'no-store',\n      signal: AbortSignal.timeout(5000) // 5s timeout\n    });\n\n    // If HEAD fails (some servers block it), try GET\n    if (!response.ok && response.status !== 405) {\n        // If it's not a \"Method Not Allowed\", we consider it a potential failure, \n        // but let's try GET just to be sure if status is 4xx/5xx? \n        // Actually, just checking if we got *any* response is often enough for \"connectivity\",\n        // but for \"status\", we want 200-299.\n    }\n    \n    // We consider it \"up\" if we got a response, even if it's 403 or something, \n    // because it means the server is reachable. \n    // But typically we want 200 OK. Let's return the status code too.\n    const end = performance.now();\n    \n    return NextResponse.json({\n      status: response.ok ? 'up' : 'down', // strict check? or loose? Let's stick to strict 200-299 for \"up\"\n      latency: Math.round(end - start),\n      httpCode: response.status\n    });\n  } catch (error) {\n    // Retry with GET if HEAD failed? Or just fail?\n    // Let's try a quick GET with small range if possible, or just fail.\n    // Simple is better for now.\n    return NextResponse.json({\n      status: 'down',\n      latency: 0,\n      error: 'Unreachable'\n    });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,YAAY,aAAa,GAAG,CAAC;IAEnC,IAAI,CAAC,WAAW;QACd,OAAO,8LAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IAEA,MAAM,QAAQ,YAAY,GAAG;IAC7B,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,WAAW;YACtC,QAAQ;YACR,OAAO;YACP,QAAQ,YAAY,OAAO,CAAC,MAAM,aAAa;QACjD;QAEA,iDAAiD;QACjD,IAAI,CAAC,SAAS,EAAE,IAAI,SAAS,MAAM,KAAK,KAAK;QACzC,2EAA2E;QAC3E,2DAA2D;QAC3D,uFAAuF;QACvF,qCAAqC;QACzC;QAEA,4EAA4E;QAC5E,6CAA6C;QAC7C,kEAAkE;QAClE,MAAM,MAAM,YAAY,GAAG;QAE3B,OAAO,8LAAY,CAAC,IAAI,CAAC;YACvB,QAAQ,SAAS,EAAE,GAAG,OAAO;YAC7B,SAAS,KAAK,KAAK,CAAC,MAAM;YAC1B,UAAU,SAAS,MAAM;QAC3B;IACF,EAAE,OAAO,OAAO;QACd,+CAA+C;QAC/C,oEAAoE;QACpE,4BAA4B;QAC5B,OAAO,8LAAY,CAAC,IAAI,CAAC;YACvB,QAAQ;YACR,SAAS;YACT,OAAO;QACT;IACF;AACF"}}]
}