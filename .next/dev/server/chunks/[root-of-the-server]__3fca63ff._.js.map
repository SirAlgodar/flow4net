{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/gabrieldesouza/Documents/trae_projects/flow4network/src/app/api/speedtest/download/route.ts"],"sourcesContent":["\nexport async function GET() {\n  // 10MB total size\n  const totalSize = 10 * 1024 * 1024;\n  const bufferSize = 64 * 1024; // 64KB chunks\n  \n  // Create a reusable noise buffer to save CPU during the stream loop\n  const noiseBuffer = new Uint8Array(bufferSize);\n  for(let i=0; i<bufferSize; i++) noiseBuffer[i] = Math.floor(Math.random() * 256);\n\n  const stream = new ReadableStream({\n    start(controller) {\n        let sent = 0;\n        try {\n            while (sent < totalSize) {\n                // Enqueue the reused buffer. \n                // Note: In some environments, enqueued chunks should be copied if modified later, \n                // but here we don't modify it.\n                controller.enqueue(noiseBuffer);\n                sent += bufferSize;\n            }\n            controller.close();\n        } catch (err) {\n            // If the stream is cancelled by the client, this might throw\n            // We can just ignore it or log it\n            try { controller.close(); } catch(e) {}\n        }\n    }\n  });\n\n  return new Response(stream, {\n    headers: {\n      'Content-Type': 'application/octet-stream',\n      'Cache-Control': 'no-store, no-transform',\n    },\n  });\n}\n"],"names":[],"mappings":";;;;AACO,eAAe;IACpB,kBAAkB;IAClB,MAAM,YAAY,KAAK,OAAO;IAC9B,MAAM,aAAa,KAAK,MAAM,cAAc;IAE5C,oEAAoE;IACpE,MAAM,cAAc,IAAI,WAAW;IACnC,IAAI,IAAI,IAAE,GAAG,IAAE,YAAY,IAAK,WAAW,CAAC,EAAE,GAAG,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;IAE5E,MAAM,SAAS,IAAI,eAAe;QAChC,OAAM,UAAU;YACZ,IAAI,OAAO;YACX,IAAI;gBACA,MAAO,OAAO,UAAW;oBACrB,8BAA8B;oBAC9B,mFAAmF;oBACnF,+BAA+B;oBAC/B,WAAW,OAAO,CAAC;oBACnB,QAAQ;gBACZ;gBACA,WAAW,KAAK;YACpB,EAAE,OAAO,KAAK;gBACV,6DAA6D;gBAC7D,kCAAkC;gBAClC,IAAI;oBAAE,WAAW,KAAK;gBAAI,EAAE,OAAM,GAAG,CAAC;YAC1C;QACJ;IACF;IAEA,OAAO,IAAI,SAAS,QAAQ;QAC1B,SAAS;YACP,gBAAgB;YAChB,iBAAiB;QACnB;IACF;AACF"}}]
}